<app-header [title]="title"></app-header>

<ion-content [fullscreen]="true">
  <h4 class="container mt-1">
    {{petTitle || ""}}
  </h4>
  <div class="pet-card-container">
    <swiper-container slides-per-view="4" space-between="10">
      <swiper-slide>
        <div class="story-card" (click)="sendToPetPage()">
            <div class="story-img-wrapper">
              <img 
                src="assets/icon/plus.png" 
                alt="Foto para aÃ±adir una nueva mascota" 
                class="story-img" />
            </div>
            <div class="story-name">
              Nuevo
            </div>
          </div>
      </swiper-slide>
      @for (pet of petsList; track pet; let i = $index) {
        <swiper-slide>
          <div class="story-card" (click)="sendToPetPage(pet._id)">
            <div class="story-img-wrapper">
              <img 
                [src]="pet?.photo || 'assets/icon/logo.png'" 
                alt="Foto del perfil del perro" 
                class="story-img"
                (error)="onImageError($event)" />
            </div>
            <div class="story-name">
              {{pet?.name || ''}}
            </div>
          </div>
        </swiper-slide>
      }
    </swiper-container>
  </div>

  <h4 class="container">
    {{taskTitle || ""}}
  </h4>
  <app-schelude [taskList]="taskList" (selectedDateChange)="onSelectedDateChange($event)"></app-schelude>

  <h4 class="container subTaskTitle">
    {{subTaskDaySelectedTitle || ""}}
  </h4>
  <!-- <div class="taskNewItem" (click)="sendToTaskPage()">
    <ion-icon name="add-outline"></ion-icon>
    <ion-text>Nueva tarea</ion-text>
  </div> -->
  <app-button
    class="taskNewItem"
    [role]="'submit'" 
    [form]="" 
    [type]="'submit'" 
    [class]="'secondary-button'" 
    [buttonContent]="'Nueva tarea'"
    [icon]="'add-outline'"
    (onButtonClicked)="sendToTaskPage()">
  </app-button>
  @if (taskListOnDateSelected.length > 0) {
    <app-task-list [taskListSetter]="taskListOnDateSelected" (onTaskSelected)="sendToTaskPage($event)"></app-task-list>
  }
</ion-content>
